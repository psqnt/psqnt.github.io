"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3687],{3687:(T,u,a)=>{a.r(u),a.d(u,{LoginPageModule:()=>_});var d=a(6814),r=a(95),i=a(1929),g=a(5290),m=a(5861),n=a(5678),p=a(6402),h=a(7911);function f(t,c){if(1&t){const s=n.EpF();n.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",10)(3,"ion-button",11),n.NdJ("click",function(){n.CHM(s);const e=n.oxw();return n.KtG(e.cancel())}),n._uU(4,"Cancel"),n.qZA()(),n.TgZ(5,"ion-title"),n._uU(6,"Login with nsec"),n.qZA(),n.TgZ(7,"ion-buttons",12)(8,"ion-button",13),n.NdJ("click",function(){n.CHM(s);const e=n.oxw();return n.KtG(e.confirm())}),n._uU(9,"Confirm"),n.qZA()()()(),n.TgZ(10,"ion-content",3)(11,"ion-input",14),n.NdJ("ngModelChange",function(e){n.CHM(s);const l=n.oxw();return n.KtG(l.nsec=e)}),n.qZA()()}if(2&t){const s=n.oxw();n.xp6(8),n.Q6J("strong",!0),n.xp6(3),n.Q6J("ngModel",s.nsec)}}const L=[{path:"",component:(()=>{var t;class c{constructor(o,e,l){this.router=o,this.auth=e,this.toast=l,this.showLoginScreen=!1,this.nsec="",this.nKeys={nsec:"",npub:""}}ngOnDestroy(){this.nKeys={nsec:"",npub:""}}createAccount(){this.nKeys=this.auth.createAccount(),this.navigateToApp()}loginAccount(){this.nKeys=this.auth.loginAccount(this.nsec),this.nKeys.npub?this.navigateToApp():this.showLoginError()}showLoginError(){var o=this;return(0,m.Z)(function*(){yield(yield o.toast.createToast("Invalid nsec. Login Failed",3e3,"bottom","danger")).present()})()}navigateToApp(){this.router.navigate(["/upcoming"])}showLogin(){this.showLoginScreen=!0}hideLogin(){this.showLoginScreen=!1}cancel(){this.modal&&this.modal.dismiss(null,"cancel")}confirm(){this.modal&&this.modal.dismiss(this.nsec,"confirm")}onWillDismiss(o){"confirm"===o.detail.role&&this.loginAccount()}}return(t=c).\u0275fac=function(o){return new(o||t)(n.Y36(g.F0),n.Y36(p.$),n.Y36(h.k))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],viewQuery:function(o,e){if(1&o&&n.Gf(i.ki,5),2&o){let l;n.iGM(l=n.CRH())&&(e.modal=l.first)}},decls:22,vars:1,consts:[["color","primary",1,"ion-text-center"],[1,"ion-text-center"],["color","medium"],[1,"ion-padding"],["collapse","condense"],["size","large"],["color","primary","expand","block","id","open-modal"],["id","open-toast","color","medium","expand","block",3,"click"],["trigger","open-modal",3,"willDismiss"],["trigger","open-toast","message","Account Created! View Keys in Settings",3,"duration"],["slot","start"],[3,"click"],["slot","end"],[3,"strong","click"],["type","text","placeholder","nsec1....",3,"ngModel","ngModelChange"]],template:function(o,e){1&o&&(n.TgZ(0,"ion-text",0)(1,"h1"),n._uU(2,"Chronos"),n.qZA()(),n.TgZ(3,"p",1)(4,"ion-text",2),n._uU(5,"A Calendar and Organization Tool"),n.qZA()(),n.TgZ(6,"p",1)(7,"ion-text",2),n._uU(8,"Built on Nostr"),n.qZA()(),n.TgZ(9,"ion-content",3)(10,"ion-header",4)(11,"ion-toolbar")(12,"ion-title",5),n._uU(13,"Login"),n.qZA()()(),n.TgZ(14,"ion-content",3)(15,"ion-button",6),n._uU(16,"Login"),n.qZA(),n.TgZ(17,"ion-button",7),n.NdJ("click",function(){return e.createAccount()}),n._uU(18,"Create Account"),n.qZA()(),n.TgZ(19,"ion-modal",8),n.NdJ("willDismiss",function(Z){return e.onWillDismiss(Z)}),n.YNc(20,f,12,2,"ng-template"),n.qZA(),n._UZ(21,"ion-toast",9),n.qZA()),2&o&&(n.xp6(21),n.Q6J("duration",5e3))},dependencies:[r.JJ,r.On,i.YG,i.Sm,i.W2,i.Gu,i.pK,i.yW,i.wd,i.Px,i.sr,i.ki,i.j9]}),c})()}];let A=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[g.Bz.forChild(L),g.Bz]}),c})(),_=(()=>{var t;class c{}return(t=c).\u0275fac=function(o){return new(o||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[d.ez,r.u5,i.Pc,A]}),c})()}}]);