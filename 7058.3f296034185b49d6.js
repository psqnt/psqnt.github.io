"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7058],{7058:(F,m,r)=>{r.r(m),r.d(m,{SettingsPageModule:()=>Q});var g=r(6814),u=r(95),o=r(1929),h=r(5877),t=r(5678),d=r(6402);let v=(()=>{var n;class l{constructor(e){this.authService=e,this.npub="",this.nsec=""}ngOnInit(){this.npub=this.authService.npub(),this.nsec=this.authService.nsec()}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(d.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-keys"]],decls:20,vars:2,consts:[["fill","clear"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t._uU(3,"npub"),t.qZA(),t.TgZ(4,"ion-card-subtitle"),t._uU(5,"nip-19 encoded public key"),t.qZA()(),t.TgZ(6,"ion-card-content"),t._uU(7),t.qZA(),t.TgZ(8,"ion-button",0),t._uU(9,"Copy"),t.qZA()(),t.TgZ(10,"ion-card")(11,"ion-card-header")(12,"ion-card-title"),t._uU(13,"nsec"),t.qZA(),t.TgZ(14,"ion-card-subtitle"),t._uU(15,"nip-19 encoded private key"),t.qZA()(),t.TgZ(16,"ion-card-content"),t._uU(17),t.qZA(),t.TgZ(18,"ion-button",0),t._uU(19,"Copy"),t.qZA()()),2&e&&(t.xp6(7),t.hij(" ",i.npub," "),t.xp6(10),t.hij(" ",i.nsec," "))},dependencies:[o.YG,o.PM,o.FN,o.Zi,o.tO,o.Dq]}),l})();var _=r(5861),y=r(2848);function C(n,l){if(1&n&&(t.TgZ(0,"ion-list")(1,"ion-item")(2,"ion-label"),t._uU(3),t.qZA()()()),2&n){const s=l.$implicit;t.xp6(3),t.Oqu(s)}}let S=(()=>{var n;class l{constructor(e){this.dataService=e,this.newRelay="",this.relays=[]}ngOnInit(){this.getRelays()}getRelays(){this.relays=[],this.dataService.getRelays().subscribe(e=>{e.forEach(i=>{this.relays.push(i)})})}saveRelay(){var e=this;return(0,_.Z)(function*(){yield e.dataService.AddRelay(e.newRelay),e.newRelay="",e.getRelays()})()}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(y.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-relays"]],decls:7,vars:2,consts:[[1,"ion-padding"],["label","Add Relay","placeholder","wss://relay.damus.io/",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0)(1,"ion-list")(2,"ion-item")(3,"ion-input",1),t.NdJ("ngModelChange",function(p){return i.newRelay=p}),t.qZA(),t.TgZ(4,"ion-button",2),t.NdJ("click",function(){return i.saveRelay()}),t._uU(5,"Save"),t.qZA()()(),t.YNc(6,C,4,1,"ion-list",3),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngModel",i.newRelay),t.xp6(3),t.Q6J("ngForOf",i.relays))},dependencies:[g.sg,u.JJ,u.On,o.YG,o.W2,o.pK,o.Ie,o.Q$,o.q_,o.j9]}),l})();var T=r(9422),w=r(9222);function b(n,l){if(1&n&&(t.TgZ(0,"div")(1,"ion-card")(2,"ion-card-content")(3,"ion-avatar"),t._UZ(4,"img",1),t.qZA()(),t.TgZ(5,"ion-card-header")(6,"ion-card-title"),t._uU(7),t.qZA()(),t.TgZ(8,"ion-card-content"),t._uU(9),t.qZA()()()),2&n){const s=t.oxw();t.xp6(4),t.s9C("src",s.picture,t.LSH),t.xp6(3),t.Oqu(s.userContent.name),t.xp6(2),t.hij(" ",s.userContent.about," ")}}function P(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"div")(1,"ion-list")(2,"ion-item")(3,"ion-input",2),t.NdJ("ngModelChange",function(i){t.CHM(s);const a=t.oxw();return t.KtG(a.newName=i)}),t.qZA()(),t.TgZ(4,"ion-item")(5,"ion-input",3),t.NdJ("ngModelChange",function(i){t.CHM(s);const a=t.oxw();return t.KtG(a.newAbout=i)}),t.qZA()()(),t.TgZ(6,"ion-button",4),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.publishProfile())}),t._uU(7,"Publish Profile"),t.qZA()()}if(2&n){const s=t.oxw();t.xp6(3),t.Q6J("ngModel",s.newName),t.xp6(2),t.Q6J("ngModel",s.newAbout)}}function A(n,l){1&n&&t._UZ(0,"ion-spinner")}let x=(()=>{var n;class l{constructor(e,i,a){this.nostrService=e,this.dataService=i,this.authService=a,this.loading=!0,this.userEvent=null,this.newName="",this.newAbout="",this.userContent=null,this.picture="https://ionicframework.com/docs/img/demos/avatar.svg"}ngOnInit(){this.getUserFromRelayPool()}getUserFromRelayPool(){var e=this;return(0,_.Z)(function*(){e.dataService.getRelays().subscribe(function(){var i=(0,_.Z)(function*(a){if(null!==a){let f=[];for(var p of a)f.push(p);var c;e.userEvent=yield e.nostrService.getSelf(f),e.userEvent&&(e.userContent=JSON.parse(e.userEvent.content),null!==(c=e.userContent)&&void 0!==c&&c.picture&&(e.picture=e.userContent.picture)),e.loading=!1}});return function(a){return i.apply(this,arguments)}}())})()}publishProfile(){var e=this;const i=this.authService.getPrivateKey();let a=new T.cM(this.newName,this.newAbout,i);this.dataService.getRelays().subscribe(function(){var p=(0,_.Z)(function*(c){if(null!==c){let Z=[];for(var f of c)Z.push(f);e.nostrService.publishEventToPool(a.getSignedEvent(),Z)}});return function(c){return p.apply(this,arguments)}}())}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(w.B),t.Y36(y.D),t.Y36(d.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-profile"]],decls:3,vars:3,consts:[[4,"ngIf"],["alt","profile picture",3,"src"],["label","Name",3,"ngModel","ngModelChange"],["label","About",3,"ngModel","ngModelChange"],["expand","block",3,"click"]],template:function(e,i){1&e&&t.YNc(0,b,10,3,"div",0)(1,P,8,2,"div",0)(2,A,1,0,"ion-spinner",0),2&e&&(t.Q6J("ngIf",!i.loading&&i.userEvent&&i.userContent),t.xp6(1),t.Q6J("ngIf",!i.loading&&!i.userEvent),t.xp6(1),t.Q6J("ngIf",i.loading))},dependencies:[g.O5,u.JJ,u.On,o.BJ,o.YG,o.PM,o.FN,o.Zi,o.Dq,o.pK,o.Ie,o.q_,o.PQ,o.j9]}),l})(),U=(()=>{var n;class l{constructor(e,i){this.router=e,this.authService=i}signOut(){this.authService.clearKeys(),this.router.navigate(["/login"])}}return(n=l).\u0275fac=function(e){return new(e||n)(t.Y36(h.F0),t.Y36(d.$))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-signout"]],decls:6,vars:0,consts:[[1,"ion-padding"],["color","danger"],["color","danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-content",0)(1,"ion-text",1)(2,"h3"),t._uU(3,"Signing out will wipe data from local database. Ensure anything you want saved is backed up or on Nostr"),t.qZA()(),t.TgZ(4,"ion-button",2),t.NdJ("click",function(){return i.signOut()}),t._uU(5,"Sign Out"),t.qZA()())},dependencies:[o.YG,o.W2,o.yW]}),l})();function J(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"ion-list",11)(1,"ion-item",12),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.switchComponent("keys"))}),t._UZ(2,"ion-icon",13),t.TgZ(3,"ion-label")(4,"strong"),t._uU(5,"Keys"),t.qZA()()(),t.TgZ(6,"ion-item",12),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.switchComponent("relays"))}),t._UZ(7,"ion-icon",14),t.TgZ(8,"ion-label")(9,"strong"),t._uU(10,"Relays"),t.qZA()()(),t.TgZ(11,"ion-item",12),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.switchComponent("profile"))}),t._UZ(12,"ion-icon",15),t.TgZ(13,"ion-label")(14,"strong"),t._uU(15,"Profile"),t.qZA()()(),t.TgZ(16,"ion-item",12),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.switchComponent("signout"))}),t._UZ(17,"ion-icon",16),t.TgZ(18,"ion-label")(19,"strong"),t._uU(20,"Sign out"),t.qZA()()()()}2&n&&(t.Q6J("inset",!0),t.xp6(1),t.Q6J("button",!0),t.xp6(5),t.Q6J("button",!0),t.xp6(5),t.Q6J("button",!0),t.xp6(5),t.Q6J("button",!0))}function M(n,l){if(1&n){const s=t.EpF();t.TgZ(0,"ion-button",17),t.NdJ("click",function(){t.CHM(s);const i=t.oxw();return t.KtG(i.setAllComponentsFalse())}),t._UZ(1,"ion-icon",18),t._uU(2,"Back "),t.qZA()}}function R(n,l){1&n&&t._UZ(0,"app-keys")}function q(n,l){1&n&&t._UZ(0,"app-relays")}function k(n,l){1&n&&t._UZ(0,"app-profile")}function K(n,l){1&n&&t._UZ(0,"app-signout")}const N=[{path:"",component:(()=>{var n;class l{constructor(){this.title="Settings",this.showList=!0,this.showKeys=!1,this.showRelays=!1,this.showProfile=!1,this.showSignOut=!1}switchComponent(e){this.setAllComponentsFalse(),"keys"===e&&(this.title="Keys",this.showList=!1,this.showKeys=!0),"relays"===e&&(this.title="Relays",this.showList=!1,this.showRelays=!0),"profile"===e&&(this.title="Profile",this.showList=!1,this.showProfile=!0),"signout"===e&&(this.title="Sign Out",this.showList=!1,this.showSignOut=!0)}setAllComponentsFalse(){this.title="Settings",this.showList=!0,this.showKeys=!1,this.showRelays=!1,this.showProfile=!1,this.showSignOut=!1}}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-settings"]],decls:24,vars:9,consts:[[3,"translucent"],["slot","start"],["slot","end"],["slot","icon-only","name","share-social-outline"],["slot","icon-only","name","add-outline"],["slot","icon-only","name","search"],["collapse","condense"],["size","large"],[3,"inset",4,"ngIf"],["fill","clear",3,"click",4,"ngIf"],[4,"ngIf"],[3,"inset"],[3,"button","click"],["color","primary","slot","start","name","key-outline","size","large"],["color","secondary","slot","start","name","server-outline","size","large"],["color","success","slot","start","name","person-circle-outline","size","large"],["color","danger","slot","start","name","power-sharp","size","large"],["fill","clear",3,"click"],["slot","start","name","chevron-back-outline"]],template:function(e,i){1&e&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-menu-button"),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5),t.qZA(),t.TgZ(6,"ion-buttons",2)(7,"ion-button"),t._UZ(8,"ion-icon",3),t.qZA(),t.TgZ(9,"ion-button"),t._UZ(10,"ion-icon",4),t.qZA(),t.TgZ(11,"ion-button"),t._UZ(12,"ion-icon",5),t.qZA()()()(),t.TgZ(13,"ion-content")(14,"ion-header",6)(15,"ion-toolbar")(16,"ion-title",7),t._uU(17),t.qZA()()(),t.YNc(18,J,21,5,"ion-list",8)(19,M,3,0,"ion-button",9)(20,R,1,0,"app-keys",10)(21,q,1,0,"app-relays",10)(22,k,1,0,"app-profile",10)(23,K,1,0,"app-signout",10),t.qZA()),2&e&&(t.Q6J("translucent",!0),t.xp6(5),t.Oqu(i.title),t.xp6(12),t.Oqu(i.title),t.xp6(1),t.Q6J("ngIf",i.showList),t.xp6(1),t.Q6J("ngIf",!i.showList),t.xp6(1),t.Q6J("ngIf",i.showKeys),t.xp6(1),t.Q6J("ngIf",i.showRelays),t.xp6(1),t.Q6J("ngIf",i.showProfile),t.xp6(1),t.Q6J("ngIf",i.showSignOut))},dependencies:[g.O5,o.YG,o.Sm,o.W2,o.Gu,o.gu,o.Ie,o.Q$,o.q_,o.fG,o.wd,o.sr,v,S,x,U]}),l})()}];let O=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(N),h.Bz]}),l})(),Q=(()=>{var n;class l{}return(n=l).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.ez,u.u5,o.Pc,O]}),l})()}}]);